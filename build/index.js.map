{"version":3,"sources":["../src/index.js"],"names":["mjmlLoader","content","cacheable","result","errors","length","errorMsg","resourcePath","map","error","formattedMessage","Error","code","options","getOptions","raw","html","JSON","stringify"],"mappings":";;;;;kBAGwBA,U;;AAHxB;;AACA;;;;;;AAEe,SAASA,UAAT,CAAoBC,OAApB,EAA6B;AAC1C,OAAKC,SAAL;;AAEA,QAAMC,SAAS,qBAAUF,OAAV,CAAf;;AAEA,MAAIE,OAAOC,MAAP,CAAcC,MAAlB,EAA0B;AACxB,UAAMC,WAAY,0BAAyB,KAAKC,YAAa;MAC3DJ,OAAOC,MAAP,CAAcI,GAAd,CAAkBC,SAAU,KAAIA,MAAMC,gBAAiB,EAAvD,CAA0D,EAD5D;;AAGA,UAAMD,QAAQ,IAAIE,KAAJ,CAAUL,QAAV,CAAd;AACAG,UAAMG,IAAN,GAAa,cAAb;;AAEA,UAAMH,KAAN;AACD;;AAED,QAAMI,UAAU,sBAAYC,UAAZ,CAAuB,IAAvB,CAAhB;;AAEA,MAAID,QAAQE,GAAZ,EAAiB;AACf,WAAOZ,OAAOa,IAAd;AACD;;AAED,SAAQ,kBAAiBC,KAAKC,SAAL,CAAef,OAAOa,IAAtB,CAA4B,GAArD;AACD","file":"index.js","sourcesContent":["import { mjml2html } from 'mjml';\nimport loaderUtils from 'loader-utils';\n\nexport default function mjmlLoader(content) {\n  this.cacheable();\n\n  const result = mjml2html(content);\n\n  if (result.errors.length) {\n    const errorMsg = `[mjml-loader] ERROR in ${this.resourcePath}:\n    ${result.errors.map(error => `- ${error.formattedMessage}`)}`;\n\n    const error = new Error(errorMsg);\n    error.code = 'MJML_INVALID';\n\n    throw error;\n  }\n\n  const options = loaderUtils.getOptions(this);\n\n  if (options.raw) {\n    return result.html;\n  }\n\n  return `export default ${JSON.stringify(result.html)};`;\n}\n"]}